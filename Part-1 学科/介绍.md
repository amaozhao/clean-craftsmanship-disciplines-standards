什么是学科？学科是由两部分组成的一组规则：本质部分和任意部分。最重要的部分是赋予学科力量的东西；这就是学科存在的原因。任意部分赋予学科以形式和实质。没有任意部分，学科就不可能存在。

例如，外科医生在手术前洗手。如果你仔细观察，你会发现洗手有一种非常特殊的形式。外科医生不会像你我那样简单地在流水下用肥皂洗手。相反，外科医生遵循一种仪式化的洗手纪律。我见过的一个这样的例程部分如下：

- 使用合适的肥皂。
- 使用合适的刷子。
- 对于每个手指，使用
    - 在顶部划十下。
    - 在左侧划十下。
    - 在底面划十下。
    - 在右侧划十下。
    - 在指甲上划十下。

等等。

该学科的基本部分应该是显而易见的。外科医生的手必须非常干净。但是你注意到任意部分了吗？为什么是十次而不是八次或十二次？为什么要把手指分成五个部分？为什么不是三个或七个部分？

那都是随意的。除了被认为足够之外，这些数字没有真正的原因。

在本书中，我们研究了软件工艺的五个学科。其中一些学科已有五年历史。有些只有二十岁。但在过去的几十年里，所有这些都表明了它们的用处。没有它们，软件即工艺的概念几乎是不可想象的。

该学科的基本部分应该是显而易见的。外科医生的手必须非常干净。但是你注意到任意部分了吗？为什么是十次而不是八次或十二次？为什么要把手指分成五个部分？为什么不是三个或七个部分？

那都是随意的。除了被认为足够之外，这些数字没有真正的原因。

在本书中，我们研究了软件工艺的五个学科。其中一些学科已有五年历史。有些只有二十岁。但在过去的几十年里，所有这些都表明了它们的用处。没有它们，软件即工艺的概念几乎是不可想象的。

这些学科中的每一个都有自己的基本要素和任意要素。在阅读时，您可能会发现自己的思想反对一项或多项学科。如果发生这种情况，请注意反对意见是针对学科的基本要素还是仅针对任意要素。不要让自己被任意元素误导。将注意力集中在基本要素上。一旦你内化了每个学科的本质，任意形式的重要性可能会降低。

例如，1861 年，Ignaz Semmelweis 发表了他对医生应用洗手纪律的发现。他的研究结果令人震惊。他能够证明，当医生在检查孕妇之前用氯漂白剂彻底洗手时，这些妇女随后患败血症的死亡率从十分之一下降到几乎为零。

但当时的医生在审查塞梅尔维斯提出的学科时并没有将本质与武断分开。氯漂白剂是任意部分。洗涤是本质。他们被漂白剂洗涤的不便所排斥，因此他们拒绝了洗手本质的证据。

几十年后，医生才开始真正洗手。

## 极限编程

1970 年，温斯顿·罗伊斯 (Winston Royce) 发表了将瀑布式开发过程推向主流的论文。花了将近 30 年的时间才消除了这个错误。

到 1995 年，软件专家开始考虑一种不同的、更加增量的方法。介绍了 Scrum、特征驱动开发 (FDD)、动态系统开发方法 (DSDM) 和 Crystal 方法等过程。但整个行业几乎没有变化。

然后，在 1999 年，Kent Beck 出版了《极限编程解释》（Addison-Wesley）一书。极限编程 (XP) 建立在这些先前流程中的想法的基础上，但添加了一些新的东西。 XP 添加了工程实践。

从 1999 年到 2001 年，人们对 XP 的热情呈指数级增长。正是这种热情催生并推动了敏捷革命。直到今天，XP 仍然是所有敏捷方法中定义最好、最完整的方法。其核心的工程实践是本节学科的重点。

### 生活圈子

在图 I.1 中，您可以看到 Ron Jeffries 的生活圈，它展示了 XP 的实践。我们在本书中涵盖的学科是中间的四个学科和最左边的一个学科。

![](/home/amaozhao/workspace/clean-craftsmanship-disciplines-standards/images/I-1.png)

中间的四个是 XP 的工程实践：测试驱动开发（TDD）、重构、简单设计和配对（我们称之为协作编程。最左边的实践，验收测试，是最技术性和最 XP 的业务实践的工程重点。这五个实践属于软件工艺的基础学科。



## 测试驱动开发

 TDD  是关键学科。没有它，其他学科要么是不可能的，要么是无能为力的。出于这个原因，接下来描述 TDD 的两节几乎占了本书的一半，而且技术性很强。这个组织可能看起来不平衡。确实，我也有这种感觉，我很苦恼该怎么做。然而，我的结论是，这种不平衡是对我们行业内相应不平衡的反应。很少有程序员很好地了解这门学科。

TDD 是管理程序员逐秒工作方式的学科。它既不是预先的纪律，也不是事后的纪律。 TDD 正在进行中并且在您面前。没有办法做部分 TDD；这是一门全有或全无的学科。

TDD 学科的本质非常简单。小周期和测试是第一位的。测试是第一位的。首先编写测试。首先清理测试。在所有活动中，测试都是第一位的。所有活动都被分解成最小的周期。

周期时间以秒为单位，而不是分钟。它们以字符而不是行来衡量。反馈回路一打开就几乎按字面意思关闭。

TDD 的目标是创建一个您可以信赖的测试套件。如果测试套件通过，您应该可以放心部署代码。

在所有学科中，TDD 是最繁重和最复杂的。它是繁重的，因为它支配着一切。这是你想到的第一个也是最后一个。这是你所做的一切的约束。无论压力和环境压力如何，调速器都能保持步伐稳定。

TDD 很复杂，因为代码很复杂。对于每种形状或形式的代码，都有相应的 TDD 形状或形式。 TDD 很复杂，因为测试必须设计为适合代码而不与代码耦合，并且必须涵盖几乎所有内容但仍能在几秒钟内执行。 TDD 是一项精心制作且复杂的技能，来之不易，但回报却是无法估量的。

## 重构
重构是允许我们编写干净代码的学科。没有 TDD，重构很困难，如果不是不可能的话。1 因此，如果没有 TDD，编写干净的代码同样困难或不可能。

> 可能还有其他学科可以支持重构和 TDD。 Kent Beck 的测试 && 提交 ||恢复是一种可能性。然而，在撰写本文时，它的采用率并不高，更多的是学术上的好奇心。

重构是我们在不影响行为的情况下将结构不良的代码处理成具有更好结构的代码的学科。最后一部分很关键。通过保证代码的行为不受影响，保证结构上的改进是安全的。

我们不清理代码的原因——软件系统随着时间的推移而腐烂的原因——是我们担心清理代码会破坏行为。但是如果我们有办法清理我们知道是安全的代码，那么我们就会清理代码，我们的系统就不会腐烂。

我们如何保证我们的改进不会影响行为？我们有来自 TDD 的测试。

重构也是一门复杂的学科，因为有很多方法可以创建结构不佳的代码。因此，有许多清理代码的策略。此外，这些策略中的每一个都必须无摩擦地同时适应 TDD 测试优先周期。事实上，这两个学科是如此紧密地交织在一起，以至于它们几乎密不可分。没有TDD几乎不可能重构，而没有实践重构几乎不可能实践TDD。

## 简单的设计
地球上的生命可以用层次来描述。最重要的是生态学，研究生物系统。下面是生理学，研究生命的内部机制。下一层可能是微生物学，即对细胞、核酸、蛋白质和其他大分子系统的研究。这些依次由化学科学描述，而化学科学又由量子力学描述。

将此类比扩展到编程，如果 TDD 是编程的量子力学，那么重构就是化学，而简单的设计就是微生物学。继续类比，SOLID 原则、面向对象设计和函数式编程是生理学，架构是编程的生态学。

没有重构，简单的设计几乎是不可能的。事实上，它是重构的最终目标，而重构是实现该目标的唯一可行手段。这个目标是产生简单的原子设计颗粒，以很好地适应更大的程序、系统和应用程序结构。

简单的设计并不是一门复杂的学科。它由四个非常简单的规则驱动。然而，与 TDD 和重构不同，简单设计是一门不精确的学科。它依赖于判断和经验。做得好，这是区分了解规则的学徒和了解原则的熟练工的第一个迹象。这是迈克尔羽毛所谓的设计感的开始。

## 协作编程

协作编程是在软件团队中一起工作的学科和艺术。它包括结对编程、mob 编程、代码审查和头脑风暴等子学科。协作编程涉及团队中的每个人，无论是程序员还是非程序员。它是我们共享知识、确保一致性和将团队凝聚成一个正常运作的整体的主要手段。

在所有学科中，协作编程的技术性和规范性最低。尽管如此，它可能是五个学科中最重要的，因为建立一个有效的团队既是一件难得的事情，也是一件宝贵的事情。

## 验收测试

验收测试是将软件开发团队与业务联系起来的学科。业务目的是系统所需行为的规范。这些行为被编码到测试中。如果这些测试通过，系统就会按规定运行。

测试必须是业务代表可读和可写的。正是通过编写和阅读这些测试并看到它们通过，企业才知道软件做了什么以及它做了企业需要它做什么。